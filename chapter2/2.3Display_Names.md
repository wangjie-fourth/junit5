### 2.3æ˜¾ç¤ºåç§°

æµ‹è¯•ç±»å’Œæµ‹è¯•æ–¹æ³•å¯ä»¥é€šè¿‡`@DisplayName`æ¥å£°æ˜è‡ªå®šä¹‰æ˜¾ç¤ºåœ°åç§°ï¼Œå¯ä»¥æ˜¾ç¤ºç©ºæ ¼ã€ç‰¹æ®Šå­—ç¬¦ã€ç”šè‡³`emojis`ã€‚è¿™äº›åç§°å°†é€šè¿‡æµ‹è¯•è¿è¡Œå™¨å’Œ`IDE`åœ¨æµ‹è¯•æŠ¥å‘Šæ˜¾ç¤ºã€‚

```java
mport org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

@DisplayName("A special test case")
class DisplayNameDemo {

    @Test
    @DisplayName("Custom test name containing spaces")
    void testWithDisplayNameContainingSpaces() {
    }

    @Test
    @DisplayName("â•¯Â°â–¡Â°ï¼‰â•¯")
    void testWithDisplayNameContainingSpecialCharacters() {
    }

    @Test
    @DisplayName("ğŸ˜±")
    void testWithDisplayNameContainingEmoji() {
    }

}
```

#### 2.3.1 åç§°æ˜¾ç¤ºç”Ÿæˆå™¨

`JUnit Jupiter`å…è®¸ç”¨æˆ·é€šè¿‡é…ç½®`@DisplayNameGeneration`æ³¨è§£æ¥è‡ªå®šä¹‰åç§°æ˜¾ç¤ºç”Ÿæˆå™¨ã€‚`@DisplayName`æä¾›åç§°çš„ä¼˜å…ˆçº§é«˜äº`@DisplayNameGenerator`

```java
import java.lang.reflect.Method;

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.DisplayNameGeneration;
import org.junit.jupiter.api.DisplayNameGenerator;
import org.junit.jupiter.api.Nested;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.ValueSource;

class DisplayNameGeneratorDemo {

    @Nested
    @DisplayNameGeneration(DisplayNameGenerator.ReplaceUnderscores.class)
    class A_year_is_not_supported {

        @Test
        void if_it_is_zero() {
        }

        @DisplayName("A negative value for year is not supported by the leap year computation.")
        @ParameterizedTest(name = "For example, year {0} is not supported.")
        @ValueSource(ints = { -1, -4 })
        void if_it_is_negative(int year) {
        }

    }

    @Nested
    @DisplayNameGeneration(IndicativeSentences.class)
    class A_year_is_a_leap_year {

        @Test
        void if_it_is_divisible_by_4_but_not_by_100() {
        }

        @ParameterizedTest(name = "Year {0} is a leap year.")
        @ValueSource(ints = { 2016, 2020, 2048 })
        void if_it_is_one_of_the_following_years(int year) {
        }

    }

    static class IndicativeSentences extends DisplayNameGenerator.ReplaceUnderscores {

        @Override
        public String generateDisplayNameForClass(Class<?> testClass) {
            return super.generateDisplayNameForClass(testClass);
        }

        @Override
        public String generateDisplayNameForNestedClass(Class<?> nestedClass) {
            return super.generateDisplayNameForNestedClass(nestedClass) + "...";
        }

        @Override
        public String generateDisplayNameForMethod(Class<?> testClass, Method testMethod) {
            String name = testClass.getSimpleName() + ' ' + testMethod.getName();
            return name.replace('_', ' ') + '.';
        }

    }

}
```

æ˜¾ç¤ºçš„ç»“æœæ˜¯ï¼š

```
+-- DisplayNameGeneratorDemo [OK]
  +-- A year is not supported [OK]
  | +-- A negative value for year is not supported by the leap year computation. [OK]
  | | +-- For example, year -1 is not supported. [OK]
  | | '-- For example, year -4 is not supported. [OK]
  | '-- if it is zero() [OK]
  '-- A year is a leap year... [OK]
    +-- A year is a leap year if it is divisible by 4 but not by 100. [OK]
    '-- A year is a leap year if it is one of the following years. [OK]
      +-- Year 2016 is a leap year. [OK]
      +-- Year 2020 is a leap year. [OK]
      '-- Year 2048 is a leap year. [OK]
```

#### 2.3.2è®¾ç½®é»˜è®¤çš„åç§°æ˜¾ç¤ºç”Ÿæˆå™¨

æ‚¨å¯ä»¥ä½¿ç”¨`junit.jupiter.displayname.generator.default`é…ç½®å‚æ•°æ¥æŒ‡å®šæ‚¨å¸Œæœ›åœ¨ç¼ºçœæƒ…å†µä¸‹ä½¿ç”¨çš„`DisplayNameGenerator`çš„å®Œå…¨é™å®šç±»åã€‚ä¸é€šè¿‡`@DisplayNameGeneration`æ³¨é‡Šé…ç½®çš„æ˜¾ç¤ºåç§°ç”Ÿæˆå™¨ä¸€æ ·ï¼Œæä¾›çš„ç±»å¿…é¡»å®ç°`DisplayNameGenerator`æ¥å£ã€‚é»˜è®¤çš„æ˜¾ç¤ºåç§°ç”Ÿæˆå™¨å°†ç”¨äºæ‰€æœ‰æµ‹è¯•ï¼Œé™¤é`@DisplayNameGeneration`æ³¨é‡Šå‡ºç°åœ¨ä¸€ä¸ªå°é—­çš„æµ‹è¯•ç±»æˆ–æµ‹è¯•æ¥å£ä¸Šã€‚é€šè¿‡`@DisplayName`æ³¨è§£æ‰€æ˜¾ç¤ºåç§°çš„ä¼˜å…ˆçº§æ€»é«˜äºé€šè¿‡`DisplayNameGenerator`æ˜¾ç¤ºçš„åç§°ã€‚

æ¯”å¦‚ï¼Œé»˜è®¤ä½¿ç”¨`ReplaceUnderscores`åç§°æ˜¾ç¤ºç”Ÿæˆå™¨ï¼Œæ‚¨éœ€è¦å°†é…ç½®å‚æ•°è®¾ç½®ä¸ºç›¸åº”çš„å®Œå…¨é™å®šç±»åã€‚æ¯”å¦‚åœ¨`src/test/resources/junit-platform.properties`æ–‡ä»¶ä¸‹ï¼š

```properties
junit.jupiter.displayname.generator.default = \
    org.junit.jupiter.api.DisplayNameGenerator$ReplaceUnderscores
```

ç±»ä¼¼åœ°ï¼Œå¯ä»¥æŒ‡å®šå®ç°`DisplayNameGenerator`çš„ä»»ä½•è‡ªå®šä¹‰ç±»çš„å®Œå…¨é™å®šåã€‚

æ€»çš„æ¥è¯´ï¼ŒæŒ‰ç…§ä»¥ä¸‹ä¼˜å…ˆè§„åˆ™æ¥æ˜¾ç¤ºæµ‹è¯•ç±»å’Œæµ‹è¯•æ–¹æ³•çš„åç§°ï¼š

- `@DisplayName`æä¾›çš„å€¼ï¼›
- åœ¨`@DisplayNameGeneration`æ³¨è§£è°ƒç”¨`DisplayNameGenerator`æä¾›çš„åç§°ï¼›
- é€šè¿‡é…ç½®å‚æ•°æ¥è°ƒç”¨é»˜è®¤çš„`DisplayNameGenerator`ï¼›
- è°ƒç”¨`org.junit.jupiter.api.DisplayNameGenerator.Standard`æ˜¾ç¤ºçš„åç§°ï¼›